\chapter{Общая характеристика предметной области и постановка задачи}
\section{Системы управления проектом}

Мир информационных технологий чрезвычайно быстро развивается и изменяется.
Таким образом менеджеры и участники проектов постоянно сталкиваются с изменением
требований и оперируют большим количеством информации. Управление проектами в
ИТ-сфере является сложным процессом, облегчить выполнение которого могут системы
управления проектами.

Системы управление проектами являются комплексными системами, которые
предоставляют большой спектр функциональных возможностей для деятельностей,
связанных с разработкой проектов. Функционал, обеспечивающий следующие виды
деятельности, присутствует во многих системах управления проектами:
\begin{itemize}
  \item планирование;
  \item постановка задач;
  \item оценка и разработка;
  \item управление бюджетом;
  \item распределение ресурсов;
  \item контроль качества;
  \item взаимодействие;
  \item документирование.
\end{itemize}
Системы управления проектами позволяют сделать процесс разработки более
эффективным и удобным, таким образом уменьшая сложность ведения проекта и
позволяя осуществлять управление большим количеством проектов. 

Одна из основных возможностей систем управления проектами "--- это
управление множеством событий и задач. Основные действия, производимые
при управлении задачами, следующие:
\begin{itemize}
  \item разрешение зависимостей между задачами;
  \item назначение задач участникам проекта;
  \item решение проблем, связанных с неточной оценкой срока выполнения задач.
\end{itemize}

При помощи систем управления проектами возможно выполнять множество задач
связанных с планированием, поскольку они предоставляют участникам проекта
информацию, необходимую для измерения текущих затрат на проект, и помогают
оценить объем работ и сроки, необходимые для завершения проекта. Следующая
информация может быть предоставлена системой управления проектами:
\begin{itemize}
  \item ожидаемое время выполнения задач;
  \item предупреждения о возможных рисках в проекте;
  \item объём выполняемых работ;
  \item прогресс проекта (настоящие и ожидаемые результаты);
  \item стоимость разработки.
\end{itemize}

Система управления проектами должна быть легко расширяемой, для того чтобы
удовлетворять новым требованиям. Миграция на другую систему управления
проектами в большинстве случаев невозможно из-за различия структур данных в БД
и сложных взаимосвязей между внутри БД. По этой причине, одним из важных
требований к системам управления проектами в информационных областях является
возможность расширения.

\section{Система управления проектами Redmine}

Redmine \cite{redmine} "--- это система управления проектами, основными
достоинствами которой являются, бесплатность, гибкая расширяемость, доступные
исходные коды. Данная система позволяет управлять всеми стадиями разработки
проекта, начиная от обсуждения проектного плана и заканчивая отслеживанием
задач и занесением данных об их прогрессе в общую базу знаний проекта. Одной из
главных особенностей Redmine является большое сообщество разработчиков,
сложившееся вокруг него. Redmine "--- это Open Source проект и каждый желающий
может принять участие в его разработке, тем самым способствуя его развитию.

Redmine обладает следующими возможностями:
\begin{itemize}
  \item неограниченное количество проектов;
  \item гибкая система контроля доступа;
  \item гибкая система отслеживания задач;
  \item диаграмма Ганта и календарь;
  \item новости, документы и управление файлами;
  \item RSS и уведомления по e-mail;
  \item вики-страницы;
  \item форумы;
  \item отслеживание времени;
  \item настраиваемые поля для задач, проектов и пользователей;
  \item интеграция с системами контроля версий;
  \item создание задач посредством e-mail;
  \item аутентификация через LDAP;
  \item регистрация инициируемая пользователем;
  \item поддержка множества языков;
  \item поддержка нескольких БД.
\end{itemize}
Проект активно развивается и с выходом новых версии добавляются новые
возможности.

\section{Ruby on Rails}

Redmine разработан с помощью Ruby on Rails \cite{rails}. Ruby on
Rails "--- это фреймворк, написанный на языке Ruby \cite{ruby}, предназначенный
для построения веб-приложений в соответствии с шаблоном проектирования
Модель-Вид-Контроллер. 

\subsection{Механизм работы}
Rails приложение состоит из трёх ключевых уровней: представление, модель,
контроллер. Далее произведено описание принципа работы каждого из уровней.

Уровень представления состоит из файлов-шаблонов, которые отвечают за
отображение данных приложения. Шаблоны могут быть различных видов, но основным
форматом является HTML со вставками на языке Ruby, за генерацию которого
отвечает движок ERB языка Ruby.

Уровень модели представляет доменную область и инкапсулирует бизнес-логику
приложения. Классы модели в Rails приложении могут быть связаны с базой данных
(БД) через Rails модуль ActiveRecord. ActiveRecord даёт возможность работать со
строками в БД как с объектами, а также дополнять данные объекты методами
бизнес-логики.

Контроллеры отвечают за обработку входящих HTTP запросов и формирование ответа.
Зачастую, ответ возвращается в HTML, но также возможна генерация ответа в XML,
JSON, PDF и других форматах. Контроллеры генерируют ответ на основе данных,
полученных из моделей, и соответствующих шаблонов представления.

\subsection{Способы расширения Redmine}
Существует два способа расширить функциональность Redmine: непосредственное
изменение исходного кода и оформление изменений в виде патчей или разработка 
модулей к системе, которые называются плагинами.

\subsubsection{Патч}
Изменение функциональности с помощью патча является универсальным способом,
применимым к любому приложению с открытыми исходными кодами. Патч представляет
собой файл, в котором отражены различия между двумя версиями исходных кодов
приложения. Пользователи или разработчики должны установить патч, для того
чтобы внести изменения в приложение. Процесс установки может быть осуществлён
вручную или автоматически, при помощи специальных утилит, таких как ``patch" в
UNIX системах. Механизм патчей позволяет удобным образом распространять
изменения исходного кода приложения.

\subsubsection{Плагин}
Плагин "--- это модуль, который подключается к приложению, с целью изменения
или добавления функциональности. Приложение предоставляет механизмы, которые
позволяют плагину зарегистрировать себя в приложении и использовать сервисы
предоставляемые приложением. Плагины зависят от сервисов предоставляемых
приложением и зачастую отдельно не используются. Приложение управляет
плагинами, предоставляя пользователям возможность динамически добавлять и
обновлять плагины без необходимости внесения изменений в основное приложение.
Система плагинов Redmine основана на механизме фреймворка Ruby on Rails,
называемом Engines. Rails Engine позволяет встроить одно Rails приложение или
часть его функциональности в другое Rails приложение.

\subsubsection{Сравнение способов расширения}
У каждого из способов расширения есть свои достоинства и недостатки, которые
приведены в таблице \ref{comparing_extensions}.
\begin{table}[hb!]

\makeatletter
\def\@makecaption#1#2{
  \vskip\abovecaptionskip
  \sbox\@tempboxa{#2 #1}
  \begin{flushright}
    #1
  \end{flushright}
  \begin{center}
    \textbf{#2}
  \end{center}
  \vskip\belowcaptionskip}
\makeatother

\caption{Сравнение способов расширения Redmine}
\small
\centering
\begin{tabular}{ 
|>{\centering\arraybackslash}m{0.4\textwidth}
|>{\centering\arraybackslash}m{0.25\textwidth}
|>{\centering\arraybackslash}m{0.25\textwidth}|}
\hline
\textbf{Сравниваемый параметр} & \textbf{Плагин} & \textbf{Патч}\\
\hline
Сложность разработки & Высокая & Низкая \\
\hline
Спектр решаемых задач & Ограниченный & Максимальный\\
\hline
Устойчивость к обновлениям системы & Высокая & Низкая \\
\hline
Стоимость внесения изменений & Высокая & Средняя \\
\hline
Удобство распространения & Высокое & Низкое \\
\hline
\end{tabular}

\label{comparing_extensions}
\end{table}

Плагины более сложны в разработке, поскольку необходимо использовать
механизмы предусмотренные системой плагинов и возможности языка, для того,
чтобы изменить поведение приложения. Там где при использовании патча будет
достаточным внести изменения в одну строку кода, в плагинах придётся искать
способ выполнить подобное действие с помощью возможностей, предоставляемых
системой плагинов.

С помощью плагинов возможно внести изменение только непосредственно в код
приложения и невозможно изменить внешний скрипт не управляемый приложением.
Патчи решают подобную задачу стандартным способом. Из это следует, что патчи
гораздо более мощный инструмент модификации приложения.

Плагины более устойчивы обновлениям системы, поскольку изменения вносятся на
более высоком уровне, с помощью предоставляемых механизмов. Успех применения
патча будет сильно зависеть от внутреннего устройства класса и следовательно
он будет менее устойчивым к обновлениям этого класса.

Внесение изменений как в патч, так и в плагин является затратной операцией. Но
патчи в данном случае имеют преимущество: поскольку плагины сложны в разработке
и не так гибки как патчи, то может потребоваться время, чтобы внести изменения
или внедрить новую функциональность в приложение.

Распространение расширения в виде плагина обладает рядом преимуществ.
Во-первых, при установке патча возможен конфликт с одним из уже установленных
патчей. Такие конфликты в случае плагинов менее вероятны. Во-вторых, в плагине
могут быть явно указаны версии приложения с которыми он совместим или могут
быть указаны зависимости от других плагинов. В-третьих, для установки плагина
не нужно уметь использовать инструменты для применения патчей. Таким образом,
распространение расширений в виде плагинов является более предпочтительным
способом.

\section{Постановка задачи}

Ярославская лаборатория FRUCT \cite{yarfruct} ведёт исследования в области
мобильных систем и технологий, а также разрабатывает прототипы программных
продуктов, основанные на этих исследованиях. Разработка ведётся под несколько
целевых платформ, таких как MeeGo, Symbian, Android. На текущий момент активны
более 10 проектов, участниками которых являются студенты и аспиранты факультета
ИВТ.

Система управления проектами Redmine обладает рядом ограничений, которые в
некоторых случаях затрудняют процесс управления проектами, поскольку не
позволяют в полной мере отразить конкретные особенности данного процесса в
лаборатории. Поэтому в данной работе ставится задача по разработке ряда
расширений, повышающих эффективность работы с системой и реализующих
дополнительный функционал.

Разрабатываемые расширения должны добавлять следующий функционал:
\begin{itemize}
  \item ограничение доступа к репозиториям;
  \item ограничение доступа к отдельным вики-страницам;
  \item рассылка уведомлений о приближающихся и просроченных задачах; 
  \item выбор типа задачи при составлении обзора кода;
  \item механизм позиционирования всплывающего календаря;
  \item изображения-ссылки на рекомендуемые ресурсы в боковой панели.
\end{itemize}
В следующем пункте приведены детальные требования к каждому из расширений.

Помимо центральной задачи разработки расширений в работе также решаются две
дополнительные задачи:
\begin{itemize}
  \item создание инфраструктуры, упрощающей поддержку расширений;
  \item размещение расширений в открытом доступе.
\end{itemize}

Первая из этих задач возникает потому, что Redmine регулярно обновляется и
возможно, что одно из таких обновлений сделает неработоспособными часть
расширений и они потребуют исправлений. Исходя из этого, необходимо разработать
механизм позволяющий эффективно управлять итеративной разработкой и поддержкой
большого количества расширений.

Решение второй задачи желательно потому, что Redmine "--- это Open Source
проект, который развивается разработчиками по всему миру. Открыв доступ к
расширениям, можно привлечь сторонних разработчиков, которые помогут их
развивать. Для достижения этого необходимо, чтобы разработанные расширения быть
выложены в открытый доступ.

\subsection*{Требования к расширениям}

\paragraph{Ограничение доступа к вики-страницам.}
\label{definition:private_wiki}
Система контроля доступа в Redmine позволяет ограничить доступ ко всем
вики-страницам в проекте, но нет возможности ограничить просмотр лишь
отдельных вики-страниц. Были определены следующие требования к расширению:
\begin{itemize}
  \item должны быть реализованы права доступа на управления закрытыми
  страницами и на их просмотр;
  \item только пользователи с соответствующими правами могут просматривать
  вики-страницы и управлять из видимостью;   
  \item на вики-странице должен присутствовать элемент управления, позволяющий
  изменить её видимость;
  \item на вики-странице должен быть индикатор, указывающий, что страница
  является закрытой.
\end{itemize}

\paragraph{Ограничение доступа к репозиториям.}
\label{definiton:private_repository}
В лаборатории система управления проектами Redmine используется не только для
внутренних целей, но также позволяет внешним пользователям следить за развитием
общедоступных проектов. Но если разрешить неавторизованным пользователям
просматривать репозитории всех проектов, то невозможно запретить доступ к
одному из репозиториев, остальные оставляя открытыми. Были сформированы
следующие требования к расширению:
\begin{itemize}
  \item должно быть реализовано право доступа на просмотр закрытых
  репозиториев;
  \item закрытый репозиторий должен быть виден только пользователям с
  соответствующими правами;  
  \item вся информация, связанная с закрытым репозиторием, должна быть скрыта
  от пользователя, если у него нет соответствующих прав;
  \item на странице свойств репозитория должен присутствовать элемент
  управления, позволяющий изменять закрытость репозитория.
\end{itemize}

\paragraph{Рассылка уведомлений о задачах.}
\label{definition:due_date_reminder}
Расширение должно добавлять функциональность, позволяющую уведомлять
пользователей о задачах, срок исполнения которых истекает в ближайшее время или
срок которых просрочен. Были сформированы следующие требования:
\begin{itemize}
  \item уведомления осуществляется путём отсылки уведомлений в указанные дни;
  \item формат: одно уведомление с общим списком просроченных и приближающихся
  задач, отсортированных по проектам и по <<степени просроченности>>; 
  \item конфигурирование пользователем с помощью текстового поля, в которые он
  вводит дни через разделитель (1,3,5 - предупреждать за 1, за 3 и за 5
  дней);
  \item уведомление о просроченных задачах должно осуществляться принудительно
  раз в сутки.
\end{itemize}

\paragraph{Тип задачи при составлении обзора кода.}
Плагин Code Review предназначен для проведения обзоров кода, нацеленных на
улучшение кодовой базы приложения. Он позволяет создавать задачи, ссылающиеся
на обозреваемый участок кода. Плагин реализован таким образом, что тип
создаваемой задачи можно указать только в глобальных настройках. Подобное
поведение является не удобным если необходимо создать задачу, с типом отличным
от указанной в глобальных настройках. Следует сделать возможным выбор типа
задачи непосредственно во время составления обзора кода.

\paragraph{Механизм позиционирования календаря.}
В Redmine присутствует компонент, отображающий календарь. В случае если кнопка
вызова календаря располагается близко к краю страницы, календарь
будет частично скрыт и необходимо пролистнуть страницу, чтобы отобразить его
полностью. Подобное поведение проявляется при работе с Redmine на устройствах с
низким расширением экрана. Следует сделать так, чтобы в подобном случае
календарь был полностью в видимости пользователя.

\paragraph{Изображения-ссылки в боковой панели.}
Redmine может использоваться не только как система управления проектами, но и
как портал, освещающий деятельность организации. Для подобных целей необходимо
предоставить возможность размещать изображения-ссылки в боковой панели Redmine.


%%% Local Variables: 
%%% mode: latex
%%% TeX-PDF-mode: t
%%% TeX-master: "diploma"
%%% End: 
